# GENERATED FILE, DO NOT MODIFY
# regenerate with ./pipeline.sh

steps:
  - name: container-build
    image: woodpeckerci/plugin-docker-buildx
    group: dry-build
    settings:
      dockerfile: Containerfile
      dry_run: true
      repo: codeberg.org/xvnet/bird
      tags: latest
      build_args:
        VERSION: 2.14

  - name: build-2.14
    image: woodpeckerci/plugin-docker-buildx
    group: build
    settings:
      dockerfile: Containerfile
      platforms: linux/arm64/v8,linux/amd64
      repo: codeberg.org/xvnet/bird
      registry: codeberg.org
      tags:
        - 2.14
        - latest
      build_args:
        VERSION: 2.14
      username: ${CI_REPO_OWNER}
      password:
        from_secret: oci_token
    when:
      event: push

  - name: build-3.0-alpha2
    image: woodpeckerci/plugin-docker-buildx
    group: build
    settings:
      dockerfile: Containerfile
      platforms: linux/arm64/v8,linux/amd64
      repo: codeberg.org/xvnet/bird
      registry: codeberg.org
      tags:
        - 3.0-alpha2
      build_args:
        VERSION: 3.0-alpha2
      username: ${CI_REPO_OWNER}
      password:
        from_secret: oci_token
    when:
      event: push

  - name: build-2.13.1
    image: woodpeckerci/plugin-docker-buildx
    group: build
    settings:
      dockerfile: Containerfile
      platforms: linux/arm64/v8,linux/amd64
      repo: codeberg.org/xvnet/bird
      registry: codeberg.org
      tags:
        - 2.13.1
      build_args:
        VERSION: 2.13.1
      username: ${CI_REPO_OWNER}
      password:
        from_secret: oci_token
    when:
      event: push

  - name: build-2.13
    image: woodpeckerci/plugin-docker-buildx
    group: build
    settings:
      dockerfile: Containerfile
      platforms: linux/arm64/v8,linux/amd64
      repo: codeberg.org/xvnet/bird
      registry: codeberg.org
      tags:
        - 2.13
      build_args:
        VERSION: 2.13
      username: ${CI_REPO_OWNER}
      password:
        from_secret: oci_token
    when:
      event: push
